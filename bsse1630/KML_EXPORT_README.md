# KML Export Feature

## Overview

The Dhaka Transportation Route Finder now includes KML (Keyhole Markup Language) export functionality. This allows you to visualize routes and transportation networks in mapping applications like Google Earth, Google Maps, and other GIS software.

## Features

### 1. Automatic Route Export
When you solve any of the routing problems (Problems 1-3), the solution is automatically exported to a KML file:

- **Problem 1**: `problem1_shortest_car_route.kml` - Shortest distance route using car only
- **Problem 2**: `problem2_cheapest_car_metro_route.kml` - Most cost-effective route using car and metro
- **Problem 3**: `problem3_cheapest_all_modes_route.kml` - Most cost-effective route using all transport modes

### 2. Network Export
Menu option [7] allows you to export all transportation networks to separate KML files:

- `car_network.kml` - Complete road network for cars
- `metro_network.kml` - Metro rail network
- `bikolpo_network.kml` - Bikolpo bus routes
- `uttara_network.kml` - Uttara bus routes

## Color Coding

Each transport mode is color-coded for easy visualization:

- **Car**: Red
- **Metro**: Blue  
- **Bikolpo Bus**: Green
- **Uttara Bus**: Yellow
- **Walking**: Gray

## KML File Contents

Each KML file includes:

1. **Route Segments**: Line strings showing the path between vertices
2. **Start/End Markers**: Point placemarks indicating route origin and destination
3. **Segment Details**: Information about each segment including:
   - Transport mode used
   - Distance traveled
   - Cost (for route solutions)
   - Vertex names

## Viewing KML Files

### Google Earth
1. Download and install [Google Earth](https://www.google.com/earth/)
2. Open Google Earth
3. Go to File → Open
4. Select the KML file
5. The route/network will be displayed on the map

### Google Maps
1. Go to [Google My Maps](https://www.google.com/maps/d/)
2. Click "Create a new map"
3. Click "Import" 
4. Upload the KML file
5. The route/network will be visualized

### Other GIS Software
KML files are supported by most GIS applications including:
- ArcGIS
- QGIS
- Marble
- OpenLayers
- Leaflet (with plugins)

## File Structure

KML files generated by this program follow the standard KML 2.2 specification and include:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <name>Route Name</name>
    <description>Route description</description>
    
    <!-- Style definitions for each transport mode -->
    <Style id="carStyle">...</Style>
    <Style id="metroStyle">...</Style>
    
    <!-- Route segments and placemarks -->
    <Folder>
      <Placemark>
        <LineString>
          <coordinates>lon,lat,0 lon,lat,0</coordinates>
        </LineString>
      </Placemark>
    </Folder>
  </Document>
</kml>
```

## Technical Details

### Implementation
- Header: `headers/kmlExport.h`
- Implementation: `src/kmlExport.cpp`
- Functions:
  - `exportRouteToKML()` - Export a calculated route
  - `exportNetworkToKML()` - Export a complete network
  - `exportAllNetworksToKML()` - Export all networks

### Coordinate Format
KML uses longitude-latitude-altitude format (lon,lat,alt) in decimal degrees. The program automatically converts from the internal lat-lon representation.

## Example Usage

### From Menu
```
========================================
          Mr Efficient Menu
========================================
[1] Shortest Car Route [Problem 1]
[2] Cheapest Route (Car and Metro) [Problem 2]
[3] Cheapest Route (All Modes) [Problem 3]
[4] Cheapest Route with Schedule [Problem 4]
[5] Fastest Route with Schedule [Problem 5]
[6] Cheapest Route with Deadline [Problem 6]
[7] Export All Networks to KML
[8] Quit
========================================
Enter Choice: 7

========================================
  Exporting All Networks to KML
========================================

✓ Car network exported to KML: ./car_network.kml (12543 connections)
✓ Metro network exported to KML: ./metro_network.kml (234 connections)
✓ Bikolpo Bus network exported to KML: ./bikolpo_network.kml (156 connections)
✓ Uttara Bus network exported to KML: ./uttara_network.kml (98 connections)

✓ All networks exported successfully!
========================================
```

### Programmatic Usage
```cpp
// Export a route
int routePath[] = {0, 5, 12, 34};
int routeConnections[] = {-1, 23, 45, 67};
exportRouteToKML("my_route.kml", routePath, 4, routeConnections,
                 "My Custom Route", "Description of route");

// Export specific network
exportNetworkToKML("metro.kml", TRANSPORT_METRO, "Metro Network");

// Export all networks
exportAllNetworksToKML("./output_folder");
```

## Benefits

1. **Visual Verification**: Easily verify that routes make sense geographically
2. **Presentation**: Create professional visualizations for reports and presentations
3. **Analysis**: Compare different routes and networks side-by-side
4. **Integration**: Import into other GIS workflows and applications
5. **Sharing**: Share route solutions with others who can view them in Google Earth

## Notes

- KML files are saved in the current working directory by default
- File names are automatically generated based on the problem type
- Each export overwrites the previous file with the same name
- All coordinates use WGS84 datum (standard for GPS/mapping)
